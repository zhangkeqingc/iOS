# 为什么要组件开发？



### 为什么要用组件化开发 ？

随着应用需求逐步迭代，应用的代码体积将会越来越大，为了更好的管理应用工程，我们开始借助CocoaPods版本管理工具对原有应用工程进行拆分。但是仅仅完成代码拆分还不足以解决业务之间的代码耦合，为了更好的让拆分出去的业务工程能够独立运行，必须进行组件拆分并且实现组件服务化。1.组件和组件之间没有明确的约束。2.组件单独开发、单独测试，不能揉入主项目中开发，测试也可以针对性的测试。

### 组件是什么？  

它就是通过CocoaPods来管理的文件，它能实现特定的功能。通常它都采用的私有库和私有源，不然大伙都可以看到你的代码。当然也有的组件本来就是为了开源的，开源的库通常放在公有源上。组件化主要为了解决不同app代码重复性问题，便于维护，其次为了代码功能清晰。当组件更新，各个app只需要执行pod update就把组件的功能代码更新了，不用每个app重新导入或修改相同的代码了。新建app只需要配置Podfile文件，执行pod update命令就能把组件导入过来大大提高了开发效率。每个组件实现特定的功能，不用在一堆业务代码中翻找不同的功能代码了，你说代码功能能不清晰吗？

##### 组件主要分三类：基础功能组件，基础UI组件，产品业务组件  

** 1.基础功能组件：**（类似于性能统计、Networking、网络诊断、定制Categories安全处理扩展类组件等）
按功能分库，不涉及产品业务需求，跟库Library类似
通过良好的接口拱上层业务组件调用；
不写入产品定制逻辑，通过扩展接口完成定制；

** 2. 基础UI组件：**（例如下拉刷新组件、弹出框组件、小菊花组件、选择框组件等）
产品内通用UI组件；（各个业务模块依赖使用，但需要保持好定制扩展的设计）
公共通用UI组件；（不涉及具体产品的视觉设计， 目前较少）

** 3. 产品业务组件：**（例如支付组件、分享组件、页面管理组件、评价组件、版本更新组件、WebSocket等长连接组件）
业务功能间相对独立，相互间没有Model共享的依赖；
业务之间的页面调用只能通过UIBus进行跳转；
业务之间的逻辑Action调用只能通过服务提供；
网络组件可以只包含对AFNetworking的进一步抽象，以便于更简单的使用。它比使用扩展类写在一个文件里的可读性要强的多。几个相关的请求在一个类文件里比所有的请求都在一个类文件里，大家想像就知道那个更合理。本文主要的内容是组件化的实现，不是讲组件化的代码具体实现的，关于组件化代码实现以后再说。你可以这样理解，就是想把几个.h和.m等文件怎么用CocoaPods把它变成私有库，指定的成员可以下载。大公司都是自己搭建的GitLab服务器。小公司大都使用的是git服务器。当然自己搭建的服务器上传下载要比git服务器要快的多。本文主要以git服务器为示例，所有需要你换成自己的路径和文件，工程名。以前在大公司都是比人专门建立了私有源和环境，自己上传组件就可以。当了新公司要当拓荒者一个人实现组件化，遇到问题不是一般的大，一个很小的问题就卡了我两周。**从零开始组件化你才能充分理解组件化的重要和本质。**



参考：https://blog.csdn.net/jia12216/article/details/80396293





## 模块化+POD私有库/公有库+CI总体结构



![图片](https://img2018.cnblogs.com/blog/1033813/201810/1033813-20181009144050367-200716799.jpg)

组件化过程：

1）从一个复杂的App看起来 
2）把业务无关的逻辑拆分出去 
3）把首页拆分出去 
4）把模块拆分出去 
5）让各个模块能单独运行 
6）使用Cocoapods进行依赖管理



# iOS项目组件化进程



1、调研组件化框架

2、了解组件化必备工具

Cocoapods  github 

3、了解组件化依据原理

runtime 

4、了解组件化思想

5、已有项目组件化拆分步骤设计

